<!DOCTYPE html>
<html>
<head>
    <title>OpenClover 4.4 : 7. Test Optimization for IDEA</title>
    <link rel="stylesheet" href="../../../resources/css/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="../../../resources/css/style.css" type="text/css"/>
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="../../../index"><img src="../../../resources/img/openclover_logo_white_40pt_alpha_with_icon.png" alt="OpenClover"/></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMainMenu" aria-controls="navbarMainMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarMainMenu">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="../../../index">Overview</a></li>
                <li class="nav-item"><a class="nav-link" href="../../../features">Features</a></li>
                <li class="nav-item"><a class="nav-link" href="../../../downloads">Downloads</a></li>
                <li class="nav-item"><a class="nav-link active" aria-current="page" href="../../../documentation">Documentation</a></li>
                <li class="nav-item"><a class="nav-link" href="../../../support">Support</a></li>
                <li class="nav-item"><a class="nav-link" href="../../../blog">Blog</a></li>
                <!--<li><a href="../../../faq">FAQ</a></li>-->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="../../../about-us" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">About us</a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="../../../about-us">Development team</a></li>
                        <li><a class="dropdown-item" href="../../../privacy-policy">Privacy policy</a></li>
                        <li><a class="dropdown-item" href="../../../license">License information</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div id="page" class="container">
    <div id="main">
        <div id="main-header">
            <nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '&raquo;';">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="index.html">OpenClover 4.4</a>
                    </li>
                    <li class="breadcrumb-item"><span><a href="index--clover-documentation-home.html">Clover Documentation Home</a></span>
                    </li>
                    <li class="breadcrumb-item"><span><a href="idea--overview.html">Clover-for-IDEA</a></span>
                    </li>
                    <li class="breadcrumb-item"><span><a href="idea--user-guide.html">Clover-for-IDEA User&#39;s Guide</a></span>
                    </li>
                </ol>
            </nav>
        </div>

        <h1 id="title-heading" class="pagetitle">
            7. Test Optimization for IDEA </h1>

        <div class="alert alert-warning" role="alert">
            You are reading documentation for version 4.4.x. Check the <a href="../latest/idea--test-optimization.html" class="alert-link">latest version</a>.
        </div>
        <div id="content" class="view">

            <div id="main-content">
                <p>This page explains how to set up Clover's Test Optimization feature in the IDEA development
                    environment.</p>
                <p><em>On this page:</em></p>
                <p>
                    <style type="text/css">/*<![CDATA[*/
                    div.rbtoc1491813727982 {
                        padding: 0px;
                    }

                    div.rbtoc1491813727982 ul {
                        list-style: disc;
                        margin-left: 0px;
                    }

                    div.rbtoc1491813727982 li {
                        margin-left: 0px;
                        padding-left: 0px;
                    }

                    /*]]>*/




                    </style>
                <div class="toc-macro rbtoc1491813727982">
                    <ul class="toc-indentation">
                        <li><a href="#id-7.TestOptimizationforIDEA-BeforeYouBegin">Before You Begin</a></li>
                        <li><a href="#id-7.TestOptimizationforIDEA-LaunchingTestOptimization">Launching Test
                            Optimization</a></li>
                        <li><a href="#id-7.TestOptimizationforIDEA-MeasuringTestOptimizationResults">Measuring Test
                            Optimization Results</a></li>
                        <li><a href="#id-7.TestOptimizationforIDEA-TestOptimizationSettings">Test Optimization
                            Settings</a>
                            <ul class="toc-indentation">
                                <li><a href="#id-7.TestOptimizationforIDEA-SettingGlobalPreferences">Setting Global
                                    Preferences</a></li>
                                <li><a href="#id-7.TestOptimizationforIDEA-SettingPer-launcherPreferences">Setting
                                    Per-launcher Preferences</a></li>
                            </ul>
                        </li>
                        <li><a href="#id-7.TestOptimizationforIDEA-ConfigurationsUnsuitableForTestOptimization">Configurations
                            Unsuitable For Test Optimization</a>
                            <ul class="toc-indentation">
                                <li><a href="#id-7.TestOptimizationforIDEA-LimitationswithTestSuites">Limitations with
                                    Test Suites</a></li>
                                <li><a href="#id-7.TestOptimizationforIDEA-Limitationwithtestmethods">Limitation with
                                    test methods</a></li>
                            </ul>
                        </li>
                        <li><a href="#id-7.TestOptimizationforIDEA-Troubleshooting">Troubleshooting</a></li>
                    </ul>
                </div>
                </p><h2>Before You Begin</h2>
                <p>Before using Test Optimization with Clover-for-IDEA, be aware of the following.</p>
                <ul>
                    <li>Test Optimization is available as a '<strong>Run Optimized</strong>' command, similar to
                        '<strong>Run</strong>' or '<strong>Debug</strong>'.
                    </li>
                    <li>Test Optimization supports JUnit launch configurations only.</li>
                    <li>Ensure you have Clover enabled on the project; when there is no Clover instrumentation, there is
                        no Test Optimization.
                    </li>
                </ul>
                <h2>Launching Test Optimization</h2>
                <p><strong>To establish Test Optimization in Clover-for-IDEA, carry out one of the following
                    actions</strong>:</p>
                <ul>
                    <li>Right-click on a folder or package containing test classes and select '<span><img src="attachments/188514333/188678182.png"


                    ></span>
                        <strong>Run Optimized</strong>', OR
                    </li>
                </ul>
                <p><em>Screen shot: launching a build with test optimization from the context menu</em></p>
                <p><em><span><img src="attachments/188514333/648675598.png"


                ></span><br/></em>
                </p>
                <p> </p>
                <ul>
                    <li>Select an existing launch configuration in the <strong>Run Configurations</strong> drop-down
                        menu and press <span><img src="attachments/188514333/188678182.png"


                        ></span> icon.
                    </li>
                </ul>
                <p><em>Screenshot: Launching a Build with Test Optimization from the Drop-Down Menu</em></p>
                <p><span><img src="attachments/188514333/648675595.png"


                ></span>
                </p>
                <h2>Measuring Test Optimization
                    Results</h2>
                <p>When optimized tests are being run, Clover displays additional information about it.</p>
                <p><span><img src="attachments/188514333/648675597.png"


                ></span>
                </p>
                <p>After Optimized tests run, Clover saves a snapshot file with coverage information that is used to
                    optimize the following test runs. This file may be deleted using the Delete Snapshot icon
                    <span><img src="attachments/188514333/188678181.png"


                    ></span>
                    in the Clover tool bar. The Delete Snapshot icon is invisible when the project does not have the
                    snapshot file. Test Optimization would run all tests (no optimization) when the snapshot file is
                    deleted or absent.</p>
                <h2>Test Optimization Settings</h2>
                <h3>Setting Global Preferences</h3>
                <p>Open the &quot;Clover (global settings)&quot; page. On this page you can defined how Clover should
                    notify about empty test runs, i.e. ones that have all tests optimised out.</p>
                <ul>
                    <li>Display a dialog: Shows a dialog box that requires the user to close it manually before test run
                        can proceed,
                    </li>
                    <li>Display a balloon: Pops up a notification balloon.</li>
                </ul>
                <p><em>Screen shot: Setting Global Preferences</em></p>
                <p><img width="700" src="attachments/188514333/857059072.png"


                ></p>
                <h3>Setting Per-launcher
                    Preferences</h3>
                <p>Open the &quot;Edit configurations&quot; dialog, select test configuration. Next open the &quot;Startup/Connection&quot; tab and select the &quot;Clover Test Optimization&quot;.</p>
                <p>The list below shows the settings available for Test Optimization for specific JUnit
                    configurations.</p>
                <ul>
                    <li>Discard snapshot every X compiles: When enabled, snapshot is re-generated every X compiles. This
                        is the equivalent of Ant's '<strong>fullrunevery</strong>' setting.
                    </li>
                    <li>Minimize tests: when enabled, Clover will run only tests relevant to recent changes in code;
                        when disabled, Clover will only reorder tests
                    </li>
                    <li>Test reordering:
                        <ul>
                            <li>Do not reorder  - run tests in the original order</li>
                            <li>Failing tests first - re-order tests so that the ones which failed (the last time
                                Optimized Test was run) are run first.
                            </li>
                            <li>Random order - re-order tests randomly; this can be useful to spot bugs which were
                                hiding because of specific order of tests
                            </li>
                        </ul>
                    </li>
                </ul>
                <p>The defaults copied to new configurations may be set using Edit Defaults button.</p>
                <p><em>Screen shot: Running Optimized Configurations</em></p>
                <p><img width="700" src="attachments/188514333/857059064.png"


                ></p>
                <p> </p>
                <h2>Configurations
                    Unsuitable For Test Optimization</h2>
                <p>Some configurations are not suitable for Test Optimization. Please see the following points for
                    specific details.</p>
                <h3>Limitations with Test Suites</h3>
                <p>Clover does not recognise test suites as entities that should be optimised away. As the result test
                    suites are always run (never optimised).<br/> If your test launch configuration includes both test
                    suite and the test case (which is probably an incorrect configuration), then the test case would be
                    run twice (normal behaviour) or once (via test suite) when the test case is optimised away.</p>
                <p>Resolution: Do not include test suites in launch configuration, add test cases directly.</p>
                <p>For more information, see this JIRA issue: <a href="http://jira.atlassian.com/browse/CIJ-249" rel="nofollow">CIJ-249</a>.</p>
                <h3>Limitation with test methods</h3>
                <p>Due to bug
                    <a href="https://jira.atlassian.com/browse/CLOV-1084" rel="nofollow">CLOV-1084</a>, in case when you execute optimized run and next add new
                    test method to a class, such class will be always executed in next optimized runs. In order to fix
                    it, you have to delete optimization snapshot (see button in tool bar menu).</p>
                <h2>Troubleshooting</h2>
                <p>To troubleshoot Test Optimization in Clover-for-IDEA, check through the following solutions:</p>
                <ol>
                    <li>If Clover is disabled for the project or generally Clover does not work for the project;<br/>
                        <ul>
                            <li>Ensure that the Clover icons are visible.</li>
                            <li>Check whether Coverage Explorer shows any coverage for the project.</li>
                        </ul>
                    </li>
                    <li>If Clover has the test source settings wrong;<br/>
                        <ul>
                            <li>Check whether the Test Runs tool window shows any tests.</li>
                            <li>Ensure that Clover | Compilation | <em>Instrument test source folders</em> option is
                                enabled.
                            </li>
                        </ul>
                    </li>
                    <li>If your test case is run twice, or not optimized at all;<br/>
                        <ul>
                            <li>Clover does not support test suites. Make sure you don't try to run one, launch test
                                cases directly (<a href="http://jira.atlassian.com/browse/CIJ-249" rel="nofollow">CIJ-249</a>).
                            </li>
                        </ul>
                    </li>
                </ol>
                <p> </p>
                <hr/>
                <p>Next chapter: <a href="9.-IDEA-Advanced-topics_300814894.html">9. IDEA Advanced topics</a>.</p>
                <p> </p>
            </div>

        </div>
    </div>
</div>
<div class="container">
    <footer>
        <p class="small text-muted">
            &copy; This document is a derivative work of
            <a href="https://confluence.atlassian.com/clover">Clover documentation</a>
            created by <a href="https://www.atlassian.com">Atlassian</a> and licensed under
            <a href="https://creativecommons.org/licenses/by/2.5/au/legalcode">CC 2.5 Australia</a>.
            Modifications by Marek Parfianowicz, under
            <a href="https://creativecommons.org/licenses/by/2.5/au/legalcode">CC 2.5 Australia</a>. </p>
    </footer>
</div>
<script src="../../../resources/js/bootstrap.bundle.min.js"></script>
</body>
</html>
